# 🤖 بوت مشاريع الشركة - Telegram Bot

## 📋 نظرة عامة

بوت تيليجرام احترافي لعرض مشاريع الشركة بتفاصيلها الكاملة. يدعم الأقسام المتدرجة، البحث المتقدم، وحماية من الفوضى في الجروبات.

---

## ✨ المميزات

### 🏗️ **نظام أقسام متدرج:**

- متاجر (تاجر واحد / متعدد تجار)
- منصات تعليمية (LMS / منصات تدريب)
- تطبيقات توصيل وشحن
- أنظمة إدارة الأعمال
- تطبيقات موبايل

### 🔍 **بحث متقدم:**

- بحث بالاسم والوصف
- فلترة بالتقنيات المستخدمة
- فلترة بنطاق السعر
- إحصائيات شاملة

### 🛡️ **حماية من الفوضى:**

- رسالة واحدة فقط في الجروب
- تحديث الرسائل بدلاً من إرسال رسائل جديدة
- حماية من الطلبات المتكررة
- حذف تلقائي للرسائل بعد فترة

### 📊 **إحصائيات شاملة:**

- عدد المشاريع الإجمالي
- إحصائيات كل قسم
- متوسط الأسعار
- التقنيات الأكثر استخداماً

---

## 📁 هيكل المشروع

```
Telegram Bot/
├── 📄 bot_new.py              # البوت الرئيسي
├── 📄 config.py               # الإعدادات
├── 📄 database.py             # إدارة البيانات
├── 📄 formatters.py           # تنسيق الرسائل
├── 📄 projects_new.json       # قاعدة البيانات
├── 📄 requirements.txt        # المتطلبات
├── 📄 README.md              # هذا الملف
├── 🖥️ run_bot_server.bat     # تشغيل البوت على السيرفر
├── 🛑 stop_bot_server.bat     # إيقاف البوت
└── 📊 check_bot_status.bat    # فحص حالة البوت
```

---

## 🚀 التثبيت والتشغيل

### **الطريقة السريعة (مستحسنة):**

```bash
# تشغيل مباشر
start.bat

# أو
python start_bot.py
```

### **الطريقة اليدوية:**

#### **1. تثبيت المتطلبات:**

```bash
pip install -r requirements.txt
```

#### **2. إعداد التوكن:**

أضف توكن البوت في ملف `.env`:

```
BOT_TOKEN=your_bot_token_here
```

#### **3. تشغيل البوت:**

**على السيرفر VPS:**

```bash
run_bot_server.bat
```

**على الجهاز المحلي:**

```bash
python bot_new.py
```

#### **4. فحص حالة البوت:**

```bash
check_bot_status.bat
```

#### **5. إيقاف البوت:**

```bash
stop_bot_server.bat
```

---

## 🖥️ دليل تشغيل السيرفر

### **الملفات المطلوبة للسيرفر:**

- `bot_new.py` - البوت الرئيسي
- `config.py` - الإعدادات
- `database.py` - إدارة البيانات
- `formatters.py` - تنسيق الرسائل
- `projects_new.json` - قاعدة البيانات
- `requirements.txt` - المتطلبات

### **ملفات إدارة السيرفر:**

- `run_bot_server.bat` - تشغيل البوت على السيرفر
- `stop_bot_server.bat` - إيقاف البوت
- `check_bot_status.bat` - فحص حالة البوت

### **ميزات السيرفر:**

#### **✅ إدارة تلقائية للعمليات:**

- فحص وإيقاف النسخ السابقة تلقائياً
- تشغيل في الخلفية بدون نوافذ
- معالجة أخطاء التشغيل المتعدد

#### **✅ نظام سجلات متقدم:**

- حفظ السجلات في ملفات يومية
- تتبع الأخطاء والعمليات
- إحصائيات الاستخدام

#### **✅ حماية من الفوضى:**

- رسالة واحدة فقط في الجروب
- تحديث الرسائل بدلاً من إرسال رسائل جديدة
- حماية من الطلبات المتكررة

#### **✅ إحصائيات شاملة:**

- عدد الطلبات الإجمالي
- طلبات الجروبات والخاص
- وقت التشغيل

---

## 📊 مراقبة البوت

### **فحص حالة البوت:**

```bash
check_bot_status.bat
```

### **فحص السجلات:**

```bash
# عرض السجل اليومي
type bot_log_YYYYMMDD.txt

# مثال:
type bot_log_20250726.txt
```

### **فحص العمليات:**

```bash
# فحص جميع عمليات Python
tasklist /FI "IMAGENAME eq python.exe"

# فحص عمليات pythonw.exe
tasklist /FI "IMAGENAME eq pythonw.exe"
```

---

## 🛠️ استكشاف الأخطاء

### **مشكلة: "Conflict: terminated by other getUpdates request"**

**الحل:**

```bash
stop_bot_server.bat
# انتظر 10 ثواني
run_bot_server.bat
```

### **مشكلة: البوت لا يستجيب**

**الحل:**

```bash
check_bot_status.bat
# إذا لم يظهر البوت، شغله مرة أخرى
run_bot_server.bat
```

### **مشكلة: أخطاء في الشبكة**

**الحل:**

- تأكد من اتصال الإنترنت
- تحقق من صحة التوكن
- راجع السجلات للتفاصيل

---

## 📈 إحصائيات البوت

### **السجلات اليومية:**

- `bot_log_YYYYMMDD.txt` - سجل يومي
- يحتوي على جميع العمليات والأخطاء
- يتم إنشاؤه تلقائياً كل يوم

### **إحصائيات التشغيل:**

- وقت بدء التشغيل
- عدد الطلبات الإجمالي
- طلبات الجروبات والخاص
- الأخطاء والاستثناءات

---

## 🔄 التحديثات

### **تحديث قاعدة البيانات:**

1. عدل ملف `projects_new.json`
2. أوقف البوت: `stop_bot_server.bat`
3. شغل البوت: `run_bot_server.bat`

### **تحديث الكود:**

1. استبدل الملفات المحدثة
2. أوقف البوت: `stop_bot_server.bat`
3. شغل البوت: `run_bot_server.bat`

---

## 💡 نصائح مهمة

### **✅ نصائح التشغيل:**

- استخدم `run_bot_server.bat` دائماً للتشغيل على السيرفر
- لا تشغل أكثر من نسخة واحدة
- راجع السجلات بانتظام

### **✅ نصائح الصيانة:**

- احذف السجلات القديمة شهرياً
- راقب استخدام الذاكرة
- تأكد من صحة قاعدة البيانات

### **✅ نصائح الأمان:**

- احتفظ بنسخة احتياطية من البيانات
- لا تشارك التوكن مع أحد
- راقب السجلات للأخطاء المشبوهة

---

## 🎯 كيفية الاستخدام

### **في الجروبات:**

```
@ProjectsDetailsBot ديموز
@ProjectsDetailsBot مشاريع
@ProjectsDetailsBot demos
```

### **في الخاص:**

```
ديموز
مشاريع
demos
```

### **الأوامر المتاحة:**

- `/start` - بدء البوت
- `/help` - المساعدة
- `/stats` - الإحصائيات
- `/search` - البحث

---

## 📞 الدعم

في حالة وجود مشاكل:

1. راجع السجلات: `bot_log_YYYYMMDD.txt`
2. استخدم `check_bot_status.bat`
3. جرب إعادة التشغيل: `stop_bot_server.bat` ثم `run_bot_server.bat`

---

## 🔧 المتطلبات

```
python-telegram-bot==20.7
python-dotenv==1.0.0
APScheduler==3.10.4
pytz==2023.3
nest-asyncio==1.5.8
```

---

**تم التطوير خصيصاً للسيرفر VPS مع Windows Server** 🖥️

**آخر تحديث:** 26 يوليو 2025
